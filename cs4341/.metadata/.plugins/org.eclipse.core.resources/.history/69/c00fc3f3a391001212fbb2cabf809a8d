package ri;

import javax.script.ScriptEngine;

import ri.rule.predicate.Javascript;
import ri.rule.predicate.Predicate;

public class RuleInterpreter 
{
	private ScriptEngine engine;
	
	public Predicate createPredicate(String pred)
	{
		//in this case, there are no more operands
		//return a javascript predicate
		if(pred.charAt(0) != '(')
		{
			return new Javascript(pred, engine);
		}
		
		
		//this block of code looks for the index of the operator
		//of this particular string
		char[] p = pred.toCharArray();//the string as a list of characters
		int paren = 0; //the current parenthesis depth
		int index = -1; //the index of the operator
		
		//look through the entire string
		for(int i = 0; i < p.length; i++)
		{
			switch(p[i])
			{
			case '(': paren++; break;//in this case, increase the paren depth
			case ')': paren--; break;//in this case, decrease the paren depth
			case 'A': 
				if(paren == 1 && p[i+1] == 'N' && p[i+2] == 'D'){
					index = i;}
				break;
			case 'O': 
				if(paren == 1 && p[i+1] == 'R'){
					index = i;}
				break;
			case 'N': 
				if(paren == 1 && p[i+1] == 'O' && p[i+2] == 'T'){
					index = i;}
				break;
			}
			
			if(index >= 0)
				break;
		}
		
		
		
		return null; 
	}
}
